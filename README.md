# TANGO-CHO（単語帳 × DeepL × 類義語 × 4択クイズ + Fortune(EN)）PWA 〔TOEIC寄り〕

英語を読んでいて分からない単語が出たら、**（見つける）→ アプリに持ち込む → 翻訳 → 保存**。  
集めた単語を **「覚えてない / デフォルト / 覚えた」** の3カテゴリで管理し、**4択クイズ**で復習できるPWAです。

加えて **星占いFortune(EN)** で“まとまった英文”を生成し、文章の中から語彙を効率良く拾えるようにしています。  
**同じ条件（Birth/Target/Level）なら同じ英文が出る**ため、学習が安定します。

制作：Masato Nasu

---

## Links

- **GitHub Pages（PWA）**  
  https://masato-nasu.github.io/TANGO-CHO/

- **Hugging Face Spaces（API / DeepL中継）**  
  ※「接続設定（HF Spaces）」から設定します  

---

## できること / Features

### 1) 追加（Add）
- 英単語を入力 → **翻訳（DeepL）** → 保存
- **類義語取得（手動）**：必要なときだけ押して取得（自動取得しません）
- **ランダム（TOEIC寄り）**（翻訳の隣）
  - 内蔵の語彙プールから **1語だけ** 引いて入力欄に入れます（候補一覧は出しません）
  - 乱数候補は **TOEIC寄り（ビジネス/旅行/オフィス）**を優先する重み付けになっています
- 入力に文章や日本語が混ざっても、**最初の英単語だけを自動抽出**して扱います
  - 翻訳できない候補が出た場合、（ランダム由来なら）**自動で別候補へ切り替え**ます

### 2) 単語帳（List）
- 保存した単語を一覧表示
- ステータス（覚えてない/デフォルト/覚えた）で運用

### 3) クイズ（Quiz）
- 単語帳を元に **4択クイズ**で復習

### 4) 星占いFortune(EN)
- **項目ごとの英文**を生成（例：Overall / Love / Work / Money / Health）
- **Target date** を変えて別日も占えます（勝手に上書きしません）
- 生成文中の **単語をタップ**すると、**追加（Add）タブに転送**できます  
  → 翻訳 → 保存の流れが最短になります

---

## 初期設定：接続設定（HF Spaces）

翻訳（DeepL）や類義語取得を使う場合、Spaces のAPIを設定します。

1. アプリ内の **接続設定（HF Spaces）** を開く
2. 以下を設定
   - **API Base**：`https://<your-space>.hf.space`
   - **App Token**：Space側で `APP_TOKEN` を設定している場合のみ（/health が `token_required: true` のとき必須）
3. 動作確認（任意）
   - `https://<your-space>.hf.space/health` を開いて JSON が返ること

---

## 使い方（最短ルート）

1. 追加（Add）で単語入力（またはランダム）
2. **翻訳（DeepL）**
3. 必要なら **類義語取得（手動）**
4. **保存**
5. 単語帳 → クイズで回す

---

## iPhoneでWeb上の英単語をアプリへ送る方法（ショートカット）

iPhoneはショートカットで「選択した単語→TANGO-CHO起動→追加欄へ入力」を作れます。

### ショートカットA：共有シートから送る（推奨）
1. ショートカットを新規作成
2. アクション例（最短）
   - **一致するテキストを取得（正規表現）**  
     - パターン：`([A-Za-z][A-Za-z'-]{0,49})`（最初の英単語を抽出）
   - （任意）小文字に変換
   - URLエンコード
   - URLを作成して開く  
     `https://masato-nasu.github.io/TANGO-CHO/index.html?word=` +（エンコード済み）
3. 共有シートに表示をON（受け入れる種類：テキスト）
4. Safariで英単語を選択 → 共有 → ショートカット実行  
   → 追加欄に入った状態で起動します

### ショートカットB：クリップボードから送る（保険）
Safariで「選択→共有」が出ない場合でも止まらない方法です。
1. クリップボードから取得 →（上と同様に抽出/エンコード/URLで開く）

---

## AndroidでWeb上の英単語をアプリへ送る方法

AndroidはiPhoneほど共有連携が強くないため、現実的には次が最短です。

### 方法1：コピー → 追加（Add）に貼り付け（最短）
1. Webで英単語をコピー
2. TANGO-CHO を開く → 追加（Add）に貼り付け
3. 翻訳 → 保存

### 方法2：URLパラメータで起動（慣れると速い）
1. 単語をコピー
2. Chromeのアドレスバーに以下を貼り付けて開く  
   `https://masato-nasu.github.io/TANGO-CHO/index.html?word=（ここに貼り付け）`
3. 追加欄に入った状態で起動 → 翻訳 → 保存

（例）  
`https://masato-nasu.github.io/TANGO-CHO/index.html?word=subscription`

※ `word` の代わりに `text` / `q` / `t` でも受け取れます（用途により）

---

## よくあるトラブル（更新が反映されない）

PWAはキャッシュの影響で古い版が残ることがあります。

- PC：**Ctrl + Shift + R**（強制リロード）
- Android：PWAをアンインストール → 再インストールが確実
- iPhone：ホーム画面から削除 → Safariのサイトデータ削除 → 再追加が確実

---

## データの保存先
- 単語帳データは端末内（ローカル）に保存されます（サインイン不要）

---

## Thanks
- DeepL API
- Hugging Face Spaces
- GitHub Pages / PWA
