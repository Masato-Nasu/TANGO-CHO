# TANGO-CHO（単語帳 × DeepL × 類義語 × 4択クイズ + Fortune(EN)） PWA

英語を読んでいて分からない単語が出たら、**（見つける）→ アプリに持ち込む → 翻訳 → 保存**。  
集めた単語を **「覚えてない / デフォルト / 覚えた」** の3カテゴリで管理し、**4択クイズ**で復習できるPWAです。

加えて、**Fortune(EN)** で“まとまった英文”を毎日生成し、文章の中から語彙を効率良く拾えるようにしています。  
（占い本文は読みやすさ優先で大きめの文字サイズにしています）

制作：Masato Nasu

---

## Links

- **GitHub Pages（PWA）**  
  https://masato-nasu.github.io/TANGO-CHO/
- **Hugging Face Spaces（API / DeepL中継）**  
  ※「接続設定（HF Spaces）」から設定します

---

## できること / Features

### 1) 追加（Add）
- 英単語を入力 → **翻訳（DeepL）** → 保存
- **類義語**（必要なときだけ手動で取得）
- **ランダム**（翻訳の隣）  
  内蔵の語彙プールから1語だけ引いて、英単語欄に入れます（表に候補を並べません）。  
  その後、必要なら「翻訳（DeepL）」→「保存」で登録します。

### 2) 単語帳（List）
- 登録語彙を一覧表示
- ステータス：**覚えてない / デフォルト / 覚えた**
- 並び替え・検索

### 3) クイズ（Quiz）
- 登録語彙から4択クイズ
- 学習状況は端末内に保存（ローカル）

### 4) Fortune(EN)
- Birth date / Target date を指定して **Generate**
- 生成された英文は「まとまった文脈」を持つので、単語の積み上げが速くなります
- （実装が有効な場合）本文内の単語をタップして、追加フォームに送れます → 翻訳 → 保存

---

## 使い方（最短）

1. **Fortune(EN)** で英文を生成  
2. 気になった語彙を拾う（タップ転送 or コピペ）  
3. **Add** で翻訳 → 保存  
4. **Quiz** で回す

---

## こまめなバックアップ（単語保存）

単語帳データは端末内（ローカル）に保存されます。  
機種変更やトラブルに備えて、**定期的に単語保存**する運用をおすすめします。

- 保存：追加タブ → ⚙️ 接続設定 → **単語保存**
- 読込：追加タブ → ⚙️ 接続設定 → **単語復元**

### 単語復元の選択肢（2種類）
単語復元を押すと、番号選択のメニューが出ます。

- **1：ファイルから復元**  
  以前に保存した `tangocho-backup-XXXX.json` などのファイルから復元します（端末をまたいで移行したい時に有効）。

- **2：履歴から復元（端末内・直近12世代）**  
  アプリが自動で保存している「直近の履歴（端末内）」から復元します（誤操作で上書きした直後などに便利）。
  ※履歴は端末内で最大12世代。端末の保存容量がいっぱいの場合、履歴は自動で間引かれます。  
  ※端末内の履歴なので、機種変更には使えません。

どちらも、復元前に「現在の単語帳を上書きする」確認が出ます。

---

## iPhoneでWeb上の単語をアプリへ送る（ショートカット例）

#### まず動作確認（手動）
Safariで下のURLを開き、追加欄に `subscription` が入ればOKです。  
`https://masato-nasu.github.io/TANGO-CHO/index.html?word=subscription`

#### ショートカットA：共有シートから送る（本命）
1. **ショートカット**アプリ → 右上 **＋** → 新規ショートカット
2. アクションを追加（上から順に）
   - **一致するテキストを取得（正規表現）**  
     - 入力：ショートカット入力  
     - パターン：`([A-Za-z][A-Za-z'-]{0,49})`  
     - 取得：最初の一致
   - （任意）**小文字に変換**
   - **URLエンコード**
   - **URL**（以下を作成）  
     `https://masato-nasu.github.io/TANGO-CHO/index.html?word=` +（エンコード済みテキスト）
   - **URLを開く**
3. 上部の **(i) / 詳細** → **共有シートに表示** をON  
   - 受け入れる種類：**テキスト**
4. 名前を付ける：例）**TANGO-CHOに送る** → 完了

**使い方**：Safariで英単語を選択 → **共有** → **TANGO-CHOに送る**  
→ アプリ起動＆追加欄に自動入力 → 翻訳 → 保存

#### ショートカットB：クリップボードから送る（保険）
Safariで「選択→共有」が出ない場合でも止まらない、保険です。

1. 新規ショートカット
2. 先頭に **クリップボードから取得**
3. 以降はショートカットAと同じ（抽出→エンコード→URL→開く）
4. 名前：例）**クリップボード→TANGO-CHO**

---



## AndroidでWeb上の単語をアプリへ送る方法

Androidは（iPhoneショートカットのように）共有シートからURLパラメータを自動生成する標準機能が弱いので、現実的には以下の2通りが最短です。

### 方法A：コピー → そのまま貼り付け（最短・確実）
1. ブラウザで英単語を長押し → **コピー**
2. **TANGO-CHO** を開く → **Add** タブ
3. 英単語欄をタップ → **貼り付け**
4. **翻訳（DeepL）** → **保存**

※コツ：Androidの「分割画面」（Chrome + TANGO-CHO）にすると往復が最速になります。

### 方法B：URLパラメータ `?word=` を使う（貼り付けを“アドレスバー側”に寄せる）
1. 単語をコピー
2. Chromeのアドレスバーに以下を入力して、最後に単語を貼り付けて開く  
   `https://masato-nasu.github.io/TANGO-CHO/index.html?word=（ここに貼り付け）`
3. TANGO-CHOが開き、追加欄に単語が入った状態になります → 翻訳 → 保存

（目視確認用）例：  
`https://masato-nasu.github.io/TANGO-CHO/index.html?word=subscription`


## よくあるトラブル（更新が反映されない）

PWAはキャッシュの影響で古い版が残ることがあります。

- Android：PWAをアンインストール→再インストールが最短  
- iPhone：ホーム画面から削除→Safariのサイトデータ削除→再追加が確実

---

## Thanks
- DeepL API
- Hugging Face Spaces
- GitHub Pages / PWA
